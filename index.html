<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CuteVision</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“¸</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“¸</text></svg>">
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                primary: '#3B82F6', // blue-500
                accent: '#10B981', // emerald-500
                'background-light': '#F9FAFB', // gray-50
                'text-dark': '#1F2937', // gray-800
                'text-light': '#6B7280', // gray-500
                'card-bg': '#FFFFFF',
                'error': '#EF4444', // red-500
                'warning': '#F59E0B', // amber-500
                'success': '#10B981', // emerald-500
              },
              fontFamily: {
                heading: ['Comfortaa', 'cursive'],
                body: ['Nunito', 'sans-serif'],
              },
              borderRadius: {
                '4xl': '2rem',
              },
              boxShadow: {
                'subtle': '0 4px 20px 0 rgba(0, 0, 0, 0.05)',
              }
            }
          }
        }
    </script>
    <style>
        .app-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; background-color: #F9FAFB; transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.35s ease-in-out; z-index: 1; opacity: 0; transform: scale(0.98); pointer-events: none; }
        .app-screen.active { opacity: 1; transform: scale(1); pointer-events: auto; z-index: 2; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .spinner { animation: spin 1s linear infinite; }
        .app-dialog { transition: opacity 0.3s ease-in-out; }
        .app-dialog .dialog-content { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .app-dialog.hidden .dialog-content { transform: scale(0.95); }
        .tab-btn.active { color: #3B82F6; border-color: #3B82F6; }
    </style>
</head>
<body class="bg-gray-200 flex justify-center items-center h-screen overflow-hidden font-body text-text-dark">
    <div id="app-container" class="w-full max-w-md lg:max-w-lg h-screen sm:h-[95vh] sm:max-h-[850px] bg-background-light sm:rounded-4xl shadow-2xl relative overflow-hidden flex flex-col">
        <!-- Main Screen -->
        <main id="main-screen" class="app-screen flex flex-col">
            <header class="flex justify-between items-center p-5 bg-background-light border-b border-gray-100">
                <h1 class="font-heading text-2xl text-primary" data-translate="appName">CuteVision</h1>
                <div class="flex items-center gap-2 sm:gap-4">
                    <div id="streak-display" class="flex items-center gap-1 text-orange-500 font-bold hidden">
                        <i class="fas fa-fire"></i>
                        <span id="streak-count">0</span>
                    </div>
                    <button id="chat-btn" class="text-xl text-gray-400 hover:text-primary transition-colors"><i class="fas fa-comments"></i></button>
                    <button id="achievements-btn" class="text-xl text-gray-400 hover:text-primary transition-colors"><i class="fas fa-trophy"></i></button>
                    <button id="settings-btn" class="text-xl text-gray-400 hover:text-primary transition-colors"><i class="fas fa-cog"></i></button>
                </div>
            </header>
            <section class="flex-grow p-8 flex flex-col justify-center items-center text-center gap-6">
                <div class="welcome-message">
                    <h2 class="font-heading text-5xl text-primary mb-2" data-translate="welcomeTitle">Welcome!</h2>
                    <p class="text-lg text-text-light max-w-xs" data-translate="welcomeMessage">Get instant nutritional insights about your food.</p>
                </div>
                <button id="start-camera-btn" class="w-full bg-primary text-white font-bold py-4 px-6 rounded-full shadow-lg shadow-primary/30 hover:bg-primary/90 transition transform hover:scale-105 flex items-center justify-center gap-3 text-lg">
                    <i class="fas fa-camera"></i> <span data-translate="useCamera">Use Camera</span>
                </button>
                <div class="flex items-center w-full text-gray-400 font-semibold text-sm">
                    <hr class="flex-grow border-t border-gray-200" />
                    <span class="px-4">OR</span>
                    <hr class="flex-grow border-t border-gray-200" />
                </div>
                <label for="upload-input" class="w-full bg-card-bg text-primary border-2 border-gray-200 font-bold py-4 px-6 rounded-full shadow-subtle hover:border-primary transition cursor-pointer transform hover:scale-105 flex items-center justify-center gap-3 text-lg">
                    <i class="fas fa-image"></i> <span data-translate="uploadImage">Upload Image</span>
                </label>
                <input type="file" id="upload-input" accept="image/*" class="hidden">
            </section>
            <footer class="p-4 flex justify-around">
                 <button id="history-btn" class="text-xl text-gray-400 hover:text-primary transition-colors"><i class="fas fa-history"></i></button>
                 <button id="nutrition-tracker-btn" class="text-xl text-gray-400 hover:text-primary transition-colors"><i class="fas fa-chart-pie"></i></button>
            </footer>
        </main>

        <!-- Camera Screen -->
        <main id="camera-screen" class="app-screen bg-black">
                        <video id="camera-preview" class="w-full h-full object-cover" muted autoplay playsinline webkit-playsinline></video>
            <button id="close-camera-btn" class="absolute top-5 left-5 text-white text-2xl bg-black/30 rounded-full w-10 h-10">&times;</button>
            <div class="absolute bottom-0 left-0 right-0 p-5 flex justify-center">
                <button id="capture-btn" class="w-20 h-20 bg-white rounded-full border-4 border-black/20"></button>
            </div>
        </main>

        <!-- Preview Screen -->
        <main id="preview-screen" class="app-screen flex flex-col">
            <header class="flex justify-between items-center p-5 bg-background-light border-b border-gray-100">
                <button id="back-from-preview-btn" class="text-gray-400 hover:text-primary text-2xl w-10 h-10"><i class="fas fa-arrow-left"></i></button>
                <h2 class="font-heading text-xl text-center flex-grow text-text-dark" data-translate="imagePreview">Image Preview</h2>
                <div class="w-10"></div>
            </header>
            <section class="flex-grow p-4 flex flex-col gap-4 justify-center items-center">
                <canvas id="captured-image-canvas" width="256" height="256" class="rounded-full shadow-subtle"></canvas>
                <div class="w-full max-w-sm">
                    <label for="food-name-input" class="sr-only" data-translate="enterFoodName">Optional: Enter food name</label>
                    <div class="relative">
                        <input type="text" id="food-name-input" class="w-full p-3 border-2 border-gray-200 rounded-full" data-translate-placeholder="enterFoodName" placeholder="Optional: Enter food name (e.g., 'Apple')">
                        <button id="voice-input-btn" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-primary text-xl"><i class="fas fa-microphone"></i></button>
                    </div>
                </div>
            </section>
            <footer class="p-6 flex gap-4">
                <button id="retake-btn" class="flex-1 bg-gray-200 text-text-dark font-bold py-3 px-6 rounded-full hover:bg-gray-300 transition" data-translate="retake">Retake</button>
                <button id="analyze-btn" class="flex-1 bg-primary text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-primary/90 transition" data-translate="analyze">Analyze</button>
            </footer>
        </main>

        <!-- Results Screen -->
        <main id="results-screen" class="app-screen flex flex-col">
            <header class="flex items-center p-5 bg-background-light border-b border-gray-100">
                <button id="back-from-results-btn" class="text-gray-400 hover:text-primary text-2xl w-10 h-10" aria-label="Go Back"><i class="fas fa-arrow-left"></i></button>
                <h2 class="font-heading text-xl text-center flex-grow text-text-dark" data-translate="analysisResults">Analysis Results</h2>
                <div class="w-10">
                    <button id="share-btn" class="text-gray-400 hover:text-primary text-xl"><i class="fas fa-share-alt"></i></button>
                </div>
            </header>
            <section class="flex-grow p-6 overflow-y-auto">
                <div class="loading-state flex flex-col justify-center items-center text-center gap-6 h-full">
                    <div class="spinner w-16 h-16 border-8 border-gray-200 border-t-primary rounded-full"></div>
                    <p class="text-text-light text-lg" data-translate="analyzingFood">Analyzing your food...</p>
                </div>
                <div class="results-display hidden flex-col gap-6">
                    <div id="description-card" class="bg-card-bg p-6 rounded-2xl shadow-subtle">
                        <h3 id="food-title" class="text-3xl font-bold text-center font-heading text-text-dark"></h3>
                        <p id="food-description" class="text-center text-text-light text-md mt-2"></p>
                    </div>
                    <div id="nutrition-summary-card" class="bg-card-bg p-6 rounded-2xl shadow-subtle">
                        <h3 class="font-heading text-primary mb-4 text-xl" data-translate="nutritionSummary">Nutrition Summary</h3>
                        <div id="nutrition-data-display" class="grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-6"></div>
                    </div>
                    <div id="allergens-card" class="hidden bg-yellow-50 border border-yellow-400 p-4 rounded-xl">
                        <h3 class="font-bold text-yellow-600 mb-2 flex items-center gap-2"><i class="fas fa-allergies"></i> Allergens</h3>
                        <ul id="allergens-list" class="list-disc list-inside text-yellow-700"></ul>
                    </div>
                    <div id="warnings-card" class="hidden bg-warning/10 border border-warning/30 p-4 rounded-xl">
                        <h3 class="font-bold text-warning mb-2 flex items-center gap-2"><i class="fas fa-exclamation-triangle"></i> <span data-translate="warnings">Warnings</span></h3>
                        <ul id="warnings-list" class="list-disc list-inside text-yellow-700"></ul>
                    </div>
                    <div id="danger-card" class="hidden bg-error/10 border-error/30 p-4 rounded-xl">
                        <h3 class="font-bold text-error mb-2 flex items-center gap-2"><i class="fas fa-biohazard"></i> <span data-translate="healthRisks">Health Risks</span></h3>
                        <ul id="danger-list" class="list-disc list-inside text-red-700"></ul>
                    </div>
                    <div id="health-tip-card" class="hidden bg-success/10 border border-success/30 p-4 rounded-xl">
                        <h3 class="font-bold text-success mb-2 flex items-center gap-2"><i class="fas fa-lightbulb"></i> <span data-translate="healthyTip">Healthy Tip</span></h3>
                        <p id="health-tip" class="text-green-700"></p>
                    </div>
                     <button id="new-photo-btn" class="w-full bg-primary text-white font-bold py-3 px-6 rounded-full shadow-lg shadow-primary/30 hover:bg-primary/90 transition" data-translate="analyzeAnotherPhoto">Analyze Another Photo</button>
                     <button id="speak-results-btn" class="w-full bg-card-bg text-primary border-2 border-gray-200 font-bold py-3 px-6 rounded-full shadow-subtle hover:border-primary transition flex items-center justify-center gap-2"><i class="fas fa-volume-up"></i> Speak Results</button>
                </div>
            </section>
        </main>

        <!-- Daily Nutrition Screen -->
        <main id="daily-nutrition-screen" class="app-screen flex flex-col">
            <header class="flex justify-between items-center p-5 bg-background-light border-b border-gray-100 z-10">
                <button id="back-to-main-from-nutrition-btn" class="text-gray-400 hover:text-primary text-2xl w-10 h-10" aria-label="Go Back"><i class="fas fa-arrow-left"></i></button>
                <h2 class="font-heading text-xl text-text-dark" data-translate="dailyNutrition">Daily Nutrition</h2>
                <div class="flex gap-3">
                    <button id="summary-btn" class="text-gray-400 hover:text-primary text-xl w-10 h-10" aria-label="Weekly Summary"><i class="fas fa-calendar-week"></i></button>
                    <button id="reset-daily-nutrition-btn" class="text-gray-400 hover:text-error text-xl w-10 h-10" aria-label="Reset Daily Totals"><i class="fas fa-redo"></i></button>
                </div>
            </header>
            <section class="flex-grow p-6 overflow-y-auto flex flex-col gap-6">
                <div class="daily-totals-summary bg-card-bg p-6 rounded-2xl shadow-subtle">
                    <h3 class="font-heading text-primary mb-4 text-xl text-center" data-translate="todaysTotals">Today's Totals</h3>
                    <div id="daily-nutrition-summary-grid" class="grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-6"></div>
                </div>
                <div class="daily-log-section">
                    <h3 class="font-heading text-primary mb-4 text-xl text-center" data-translate="dailyLog">Daily Log</h3>
                    <div id="daily-food-log" class="space-y-3"></div>
                    <div class="empty-state hidden flex-col flex-grow justify-center items-center text-center text-gray-400 p-6" id="empty-daily-log-state">
                        <i class="fas fa-clipboard-list text-7xl text-gray-300 mb-4"></i>
                        <p class="text-xl" data-translate="noFoodLoggedToday">No food logged today!</p>
                        <span class="text-text-light" data-translate="analyzeFoodToAdd">Analyze food to add to your daily totals.</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Summary Screen -->
        <main id="summary-screen" class="app-screen flex flex-col">
            <header class="flex items-center p-5 bg-background-light border-b border-gray-100 z-10">
                <button id="back-from-summary-btn" class="text-gray-400 hover:text-primary text-2xl w-10 h-10" aria-label="Go Back"><i class="fas fa-arrow-left"></i></button>
                <h2 class="font-heading text-xl text-center flex-grow text-text-dark">Weekly Summary</h2>
                <div class="w-10"></div>
            </header>
            <section id="summary-content" class="flex-grow p-6 overflow-y-auto flex flex-col gap-6"></section>
        </main>

        <!-- Achievements Screen -->
        <main id="achievements-screen" class="app-screen flex flex-col">
            <header class="flex items-center p-5 bg-background-light border-b border-gray-100 z-10">
                <button id="back-from-achievements-btn" class="text-gray-400 hover:text-primary text-2xl w-10 h-10" aria-label="Go Back"><i class="fas fa-arrow-left"></i></button>
                <h2 class="font-heading text-xl text-center flex-grow text-text-dark">Achievements</h2>
                <div class="w-10"></div>
            </header>
            <section id="achievements-list" class="flex-grow p-6 overflow-y-auto grid grid-cols-2 gap-4"></section>
        </main>

        <!-- Chat Screen -->
        <main id="chat-screen" class="app-screen flex flex-col">
            <header class="flex items-center p-5 bg-background-light border-b border-gray-100 z-10">
                <button id="back-from-chat-btn" class="text-gray-400 hover:text-primary text-2xl w-10 h-10" aria-label="Go Back"><i class="fas fa-arrow-left"></i></button>
                <h2 class="font-heading text-xl text-center flex-grow text-text-dark">Food & Health AI</h2>
                <div class="w-10"></div>
            </header>
            <section id="chat-messages" class="flex-grow p-6 overflow-y-auto space-y-4"></section>
            <footer class="p-4 bg-white border-t border-gray-100 space-y-2">
                <div id="chat-image-preview-container" class="hidden p-2 bg-gray-100 rounded-lg w-fit relative">
                    <img id="chat-image-preview" class="w-16 h-16 rounded-md object-cover">
                    <button id="remove-chat-image-btn" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">&times;</button>
                </div>
                <div class="flex items-center gap-2">
                    <button id="add-history-chat-btn" class="bg-gray-200 text-gray-600 rounded-full w-12 h-12 flex-shrink-0"><i class="fas fa-history"></i></button>
                    <button id="attach-image-chat-btn" class="bg-gray-200 text-gray-600 rounded-full w-12 h-12 flex-shrink-0"><i class="fas fa-paperclip"></i></button>
                    <input type="file" id="chat-upload-input" accept="image/*" class="hidden">
                    <input type="text" id="chat-input" class="w-full p-3 border-2 border-gray-200 rounded-full" placeholder="Ask about food or health...">
                    <button id="send-chat-btn" class="bg-primary text-white rounded-full w-12 h-12 flex-shrink-0"><i class="fas fa-paper-plane"></i></button>
                </div>
            </footer>
        </main>

        <!-- History Screen -->
        <main id="history-screen" class="app-screen flex flex-col">
            <header class="flex items-center p-5 bg-background-light border-b border-gray-100">
                <button id="back-to-main-from-history-btn" class="text-gray-400 hover:text-primary text-2xl w-10 h-10" aria-label="Go Back"><i class="fas fa-arrow-left"></i></button>
                <h2 class="font-heading text-xl text-center flex-grow text-text-dark" data-translate="history">History</h2>
                <button id="clear-history-btn" class="text-gray-400 hover:text-error text-xl w-10 h-10" aria-label="Clear History"><i class="fas fa-trash"></i></button>
            </header>
            <div class="p-4 border-b border-gray-100">
                <input type="search" id="history-search-input" class="w-full p-2 border border-gray-200 rounded-lg" placeholder="Search history...">
            </div>
            <section id="history-list" class="flex-grow overflow-y-auto"></section>
            <div id="empty-history-state" class="hidden flex-col flex-grow justify-center items-center text-center text-gray-400 p-6">
                <i class="fas fa-history text-7xl text-gray-300 mb-4"></i>
                <p class="text-xl" data-translate="noHistoryYet">No history yet!</p>
                <span class="text-text-light" data-translate="startAnalyzingToSeeHistory">Start analyzing to see your history.</span>
            </div>
        </main>

        <!-- History Detail Screen -->
        <main id="history-detail-screen" class="app-screen flex flex-col">
            <header class="flex items-center p-5 bg-background-light border-b border-gray-100">
                <button id="back-to-history-list-btn" class="text-gray-400 hover:text-primary text-2xl w-10 h-10" aria-label="Go Back"><i class="fas fa-arrow-left"></i></button>
                <h2 class="font-heading text-xl text-center flex-grow text-text-dark" data-translate="historyDetail">History Detail</h2>
                <div class="w-10"></div>
            </header>
            <section class="flex-grow p-6 overflow-y-auto flex flex-col gap-6">
                <img id="history-detail-image" src="" alt="Food item" class="w-full h-48 object-cover rounded-2xl bg-gray-100">
                <div id="history-description-card" class="bg-card-bg p-6 rounded-2xl shadow-subtle">
                    <h3 id="history-detail-title" class="text-3xl font-bold text-center font-heading text-text-dark"></h3>
                    <p id="history-detail-description" class="text-center text-text-light text-md mt-2"></p>
                </div>
                <div id="history-nutrition-summary-card" class="bg-card-bg p-6 rounded-2xl shadow-subtle">
                    <h3 class="font-heading text-primary mb-4 text-xl" data-translate="nutritionSummary">Nutrition Summary</h3>
                    <div id="history-detail-nutrition-display" class="grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-6"></div>
                </div>
                <div id="history-detail-allergens-card" class="hidden bg-yellow-50 border border-yellow-400 p-4 rounded-xl">
                        <h3 class="font-bold text-yellow-600 mb-2 flex items-center gap-2"><i class="fas fa-allergies"></i> Allergens</h3>
                        <ul id="history-detail-allergens-list" class="list-disc list-inside text-yellow-700"></ul>
                    </div>
                    <div id="history-detail-warnings-card" class="hidden bg-warning/10 border border-warning/30 p-4 rounded-xl">
                    <h3 class="font-bold text-warning mb-2 flex items-center gap-2"><i class="fas fa-exclamation-triangle"></i> <span data-translate="warnings">Warnings</span></h3>
                    <ul id="history-detail-warnings-list" class="list-disc list-inside text-yellow-700"></ul>
                </div>
                <div id="history-detail-danger-card" class="hidden bg-error/10 border-error/30 p-4 rounded-xl">
                    <h3 class="font-bold text-error mb-2 flex items-center gap-2"><i class="fas fa-biohazard"></i> <span data-translate="healthRisks">Health Risks</span></h3>
                    <ul id="history-detail-danger-list" class="list-disc list-inside text-red-700"></ul>
                </div>
                <div id="history-detail-health-tip-card" class="hidden bg-success/10 border-success/30 p-4 rounded-xl">
                    <h3 class="font-bold text-success mb-2 flex items-center gap-2"><i class="fas fa-lightbulb"></i> <span data-translate="healthyTip">Healthy Tip</span></h3>
                    <p id="history-detail-health-tip" class="text-green-700"></p>
                </div>
            </section>
        </main>

        <!-- Error Screen -->
        <main id="error-screen" class="app-screen flex flex-col justify-center items-center text-center p-8 gap-4 bg-red-50">
            <i class="fas fa-exclamation-circle text-7xl text-error"></i>
            <h2 id="error-type" class="font-heading text-4xl text-error" data-translate="oops">Oops!</h2>
            <p id="error-details" class="text-lg text-red-700" data-translate="anErrorOccurred">An Error Occurred</p>
            <pre id="raw-error-response" class="text-xs text-left bg-red-100 text-red-800 p-4 rounded-lg overflow-auto max-h-40 w-full hidden"></pre>
            <button id="back-to-main-from-error-btn" class="w-full max-w-xs bg-error text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-error/90 transition" data-translate="goToMainScreen">Go to Main Screen</button>
        </main>

        <!-- Settings Dialog -->
        <div id="settings-dialog" class="app-dialog hidden opacity-0 fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4">
            <div class="dialog-content bg-card-bg rounded-2xl shadow-xl w-full max-w-md flex flex-col max-h-[90vh]">
                <header class="flex justify-between items-center p-5 border-b border-gray-100">
                    <h3 class="font-heading text-xl text-text-dark" data-translate="settings">Settings</h3>
                    <button id="close-settings-btn" class="text-gray-400 hover:text-primary text-2xl w-8 h-8">&times;</button>
                </header>
                <div class="flex-grow overflow-y-auto">
                    <nav class="flex border-b border-gray-200">
                        <button data-tab="tab-api" class="tab-btn flex-1 p-4 text-center font-bold text-sm active">API</button>
                        <button data-tab="tab-profile" class="tab-btn flex-1 p-4 text-center font-bold text-sm">Profile</button>
                        <button data-tab="tab-app" class="tab-btn flex-1 p-4 text-center font-bold text-sm">App</button>
                        <button data-tab="tab-logs" class="tab-btn flex-1 p-4 text-center font-bold text-sm">Logs</button>
                    </nav>
                    <div class="p-6 space-y-6">
                        <!-- API Tab -->
                        <div id="tab-api" class="tab-content space-y-4">
                            <div>
                                <label for="groq-api-key-input" class="block text-sm font-bold text-text-dark mb-1" data-translate="groqApiKey">Groq API Key</label>
                                <input type="password" id="groq-api-key-input" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="gsk_...">
                                <p class="text-xs text-text-light mt-1" data-translate="apiKeyHint">Your API key is stored locally and never shared.</p>
                                <p class="text-xs text-red-500 mt-1">Warning: Storing your API key in the browser is not secure. Use for development only.</p>
                            </div>
                        </div>
                        <!-- Profile Tab -->
                        <div id="tab-profile" class="tab-content hidden space-y-4">
                            <div>
                                <label for="profile-name" class="block text-sm font-bold text-text-dark mb-1">Name</label>
                                <input type="text" id="profile-name" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="Enter your name">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="profile-weight" class="block text-sm font-bold text-text-dark mb-1">Weight (kg)</label>
                                    <input type="number" id="profile-weight" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="e.g., 70">
                                </div>
                                <div>
                                    <label for="profile-height" class="block text-sm font-bold text-text-dark mb-1">Height (cm)</label>
                                    <input type="number" id="profile-height" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="e.g., 175">
                                </div>
                            </div>
                            <div>
                                <label for="profile-goal" class="block text-sm font-bold text-text-dark mb-1">Primary Goal</label>
                                <select id="profile-goal" class="w-full p-2 border border-gray-300 rounded-lg">
                                    <option value="maintain">Maintain Weight</option>
                                    <option value="lose">Lose Weight</option>
                                    <option value="gain">Gain Muscle</option>
                                    <option value="health">General Health</option>
                                </select>
                            </div>
                        </div>
                        <!-- App Tab -->
                        <div id="tab-app" class="tab-content hidden space-y-4">
                            <div>
                                <label for="language-select" class="block text-sm font-bold text-text-dark mb-1">Language</label>
                                <select id="language-select" class="w-full p-2 border border-gray-300 rounded-lg">
                                    <option value="en">English</option>
                                    <option value="hi">à¤¹à¤¿à¤‚à¤¦à¥€ (Hindi)</option>
                                </select>
                            </div>
                            <div>
                                <label for="country-select" class="block text-sm font-bold text-text-dark mb-1">Country for Food Context</label>
                                <select id="country-select" class="w-full p-2 border border-gray-300 rounded-lg">
                                    <option value="global">Global</option>
                                    <option value="US">United States</option>
                                    <option value="IN">India</option>
                                    <option value="GB">United Kingdom</option>
                                    <option value="JP">Japan</option>
                                </select>
                            </div>
                        </div>
                        <!-- Logs Tab -->
                        <div id="tab-logs" class="tab-content hidden space-y-4">
                            <div class="flex justify-between items-center">
                                <h4 class="text-lg font-bold text-text-dark">Application Logs</h4>
                                <div>
                                    <button id="copy-logs-btn" class="text-sm text-primary hover:underline">Copy</button>
                                    <button id="clear-logs-btn" class="ml-4 text-sm text-error hover:underline">Clear</button>
                                </div>
                            </div>
                            <pre id="logs-display" class="bg-gray-100 text-gray-700 text-xs p-4 rounded-lg overflow-auto h-64 w-full font-mono"></pre>
                            <p class="text-xs text-text-light mt-1">Logs are automatically cleared every 24 hours.</p>
                        </div>
                    </div>
                </div>
                <footer class="p-4 bg-gray-50 border-t border-gray-100">
                    <button id="save-settings-btn" class="w-full bg-primary text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-primary/90 transition" data-translate="save">Save Settings</button>
                </footer>
            </div>
        </div>

        <div id="history-selection-dialog" class="app-dialog hidden opacity-0 fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4">
            <div class="dialog-content bg-card-bg rounded-2xl shadow-xl w-full max-w-md flex flex-col max-h-[70vh]">
                <header class="flex justify-between items-center p-5 border-b border-gray-100">
                    <h3 class="font-heading text-xl text-text-dark">Select an item to discuss</h3>
                    <button id="close-history-select-btn" class="text-gray-400 hover:text-primary text-2xl w-8 h-8">&times;</button>
                </header>
                <div id="history-selection-list" class="flex-grow overflow-y-auto p-2"></div>
            </div>
        </div>

        <!-- Confirmation Dialog -->
        <div id="confirmation-dialog" class="app-dialog hidden opacity-0 fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4">
            <div class="dialog-content bg-card-bg rounded-2xl shadow-xl w-full max-w-sm p-6 text-center relative">
                <button id="close-confirmation-btn" class="absolute top-2 right-2 text-gray-400 hover:text-primary text-2xl w-8 h-8">&times;</button>
                <h3 id="confirmation-dialog-title" class="font-heading text-xl text-text-dark mb-2" data-translate="areYouSure">Are you sure?</h3>
                <p id="confirmation-message" class="text-text-light mb-6" data-translate="actionCannotBeUndone">This action cannot be undone.</p>
                <div class="flex justify-center gap-4">
                    <button id="cancel-confirmation-btn" class="flex-1 bg-gray-200 text-text-dark font-bold py-3 px-6 rounded-full hover:bg-gray-300 transition" data-translate="cancel">Cancel</button>
                    <button id="confirm-action-btn" class="flex-1 bg-error text-white font-bold py-3 px-6 rounded-full hover:bg-error/90 transition" data-translate="confirm">Confirm</button>
                </div>
            </div>
        </div>

        <!-- Nutrient Info Dialog -->
        <div id="nutrient-info-dialog" class="app-dialog hidden opacity-0 fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4">
            <div class="dialog-content bg-card-bg rounded-2xl shadow-xl w-full max-w-sm flex flex-col max-h-[80vh]">
                <header class="flex justify-between items-center p-5 border-b border-gray-100">
                    <h3 id="nutrient-info-title" class="font-heading text-xl text-primary"></h3>
                    <button id="close-nutrient-info-btn" class="text-gray-400 hover:text-primary text-2xl w-8 h-8">&times;</button>
                </header>
                <div id="nutrient-info-content" class="flex-grow overflow-y-auto p-6 space-y-4 text-text-light">
                    <!-- Content will be populated by JavaScript -->
                </div>
                <footer class="p-4 bg-gray-50 border-t border-gray-100">
                    <button id="speak-nutrient-info-btn" class="w-full bg-primary text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-primary/90 transition flex items-center justify-center gap-2">
                        <i class="fas fa-volume-up"></i>
                        <span>Speak Info</span>
                    </button>
                </footer>
            </div>
        </div>
    </div>
    <script src="script.js" defer></script>
</body>
</html>
